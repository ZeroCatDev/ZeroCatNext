import{J as h,a0 as v,a1 as L,M as P,S as V,a,_ as k,h as l,r as g,o as n,c as u,w as s,s as f,m as c,p as o,Z as C,e as O,y as $,F as w,q as I,x,a2 as B,z as y,a3 as A,W as T}from"./index-B4ttr3i5.js";import{V as F}from"./VContainer-DRtYH-lA.js";const N=h({start:Boolean,end:Boolean,...v(),...L()},"VListItemAction"),S=P()({name:"VListItemAction",props:N(),setup(t,e){let{slots:i}=e;return V(()=>a(t.tag,{class:["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end},t.class],style:t.style},i)),{}}}),b={data(){return{totpList:[]}},methods:{async fetchTOTPList(){try{const t=await l.get("/account/totp/list");t.status==="success"?this.totpList=t.data.list:this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}catch(t){this.$toast.add({severity:"error",summary:"错误",detail:t.message,life:3e3})}},async renameTOTP(t){const e=prompt("请输入新的名称");if(e)try{const i=await l.post("/account/totp/rename",{totp_id:t,name:e});i.status==="success"?(this.fetchTOTPList(),this.$toast.add({severity:"success",summary:"成功",detail:"TOTP验证器重命名成功",life:3e3})):this.$toast.add({severity:"error",summary:"错误",detail:i.message,life:3e3})}catch(i){this.$toast.add({severity:"error",summary:"错误",detail:i.message,life:3e3})}},async deleteTOTP(t){try{const e=await l.post("/account/totp/delete",{totp_id:t});e.status==="success"?(this.fetchTOTPList(),this.$toast.add({severity:"success",summary:"成功",detail:"TOTP验证器删除成功",life:3e3})):this.$toast.add({severity:"error",summary:"错误",detail:e.message,life:3e3})}catch(e){this.$toast.add({severity:"error",summary:"错误",detail:e.message,life:3e3})}}},mounted(){this.fetchTOTPList()}};function M(t,e,i,R,p,m){const _=g("v-list-item-content");return n(),u(F,null,{default:s(()=>[a(I,null,{default:s(()=>[a(f,{cols:"12"},{default:s(()=>[a(c,{to:"./totp/add",color:"primary",class:"mb-4"},{default:s(()=>e[0]||(e[0]=[o("生成新的TOTP验证器")])),_:1})]),_:1}),a(f,{cols:"12"},{default:s(()=>[a(C,null,{default:s(()=>[(n(!0),O(w,null,$(p.totpList,r=>(n(),u(x,{key:r.id,onClick:d=>t.selectTOTP(r)},{default:s(()=>[a(_,null,{default:s(()=>[a(B,null,{default:s(()=>[o(y(r.name),1)]),_:2},1024),a(A,null,{default:s(()=>[o(y(r.status),1)]),_:2},1024)]),_:2},1024),a(S,null,{default:s(()=>[a(c,{onClick:T(d=>m.renameTOTP(r.id),["stop"]),color:"primary"},{default:s(()=>e[1]||(e[1]=[o("重命名")])),_:2},1032,["onClick"]),a(c,{onClick:T(d=>m.deleteTOTP(r.id),["stop"]),color:"error"},{default:s(()=>e[2]||(e[2]=[o("删除")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}const D=k(b,[["render",M]]);export{D as default};
