import{_ as b}from"./NewProjectList-EgqIwmYg.js";import{_ as w,J as p,o as m,c as x,w as i,a as e,a2 as P,a3 as L,a4 as D,a7 as C,N as r,a8 as N,U as k,H as _,G as E,e as g,L as f,P as a,X as j,Y as S,ah as V,ax as O,al as T,Z as c,O as U,am as q}from"./index-B4S81A1B.js";import{V as B}from"./VContainer-BCdknvvL.js";const F={data(){return{listStates:[{state:"私密",abbr:"private"},{state:"公开",abbr:"public"}],created:!1,newid:0,isVisible:!1,listInfo:{},newListInfo:{}}},props:{listid:{type:String,required:!0},callback:{type:Function,required:!1},close:{type:Function,required:!1}},methods:{show(){this.created=!1,this.newid=0,this.isVisible=!0},async getProjectList(n){await p.get("/projectlist/"+n).then(t=>{console.log(t),this.$toast.add({severity:"info",summary:"info",detail:t,life:3e3}),t.status=="1"&&(this.listInfo=Object.assign({},t.data),this.newListInfo=Object.assign({},t.data))}),this.callback()},async updateProjectList(n){await p.put("/projectlist/"+n,this.newListInfo).then(t=>{console.log(t),this.$toast.add({severity:"info",summary:"info",detail:t,life:3e3}),t.status=="1"&&(this.listInfo=Object.assign({},t.data),this.newListInfo=Object.assign({},t.data))}),this.callback()},async deleteProjectList(n){await p.delete("/projectlist/"+n).then(t=>{console.log(t),this.$toast.add({severity:"info",summary:"info",detail:t,life:3e3})}),this.callback()}},mounted(){this.getProjectList(this.listid)}};function H(n,t,u,v,l,d){return m(),x(k,{border:"",title:`${l.listInfo.title}(#${l.listInfo.id})`},{default:i(()=>[e(P,null,{default:i(()=>[e(L,{modelValue:l.newListInfo.title,"onUpdate:modelValue":t[0]||(t[0]=o=>l.newListInfo.title=o),label:"名称",required:""},null,8,["modelValue"]),e(L,{modelValue:l.newListInfo.description,"onUpdate:modelValue":t[1]||(t[1]=o=>l.newListInfo.description=o),label:"简介",required:""},null,8,["modelValue"]),e(D,{modelValue:l.newListInfo.state,"onUpdate:modelValue":t[2]||(t[2]=o=>l.newListInfo.state=o),items:l.listStates,"item-title":"state","item-value":"abbr",label:"项目状态"},null,8,["modelValue","items"])]),_:1}),e(C,null,{default:i(()=>[e(r,{text:"删除",variant:"plain",onClick:t[3]||(t[3]=o=>{d.deleteProjectList(u.listid),u.close()}),color:"red"}),e(N),e(r,{text:"回退",variant:"plain",onClick:t[4]||(t[4]=o=>l.newListInfo=Object.assign({},l.listInfo))}),e(r,{text:"关闭",variant:"plain",onClick:t[5]||(t[5]=o=>u.close())}),e(r,{color:"primary",text:"保存",variant:"tonal",onClick:t[6]||(t[6]=o=>d.updateProjectList(u.listid))})]),_:1})]),_:1},8,["title"])}const I=w(F,[["render",H]]),h={components:{NewProjectList:b,EditProjectListConfig:I},name:"projectlist",data(){return{localuser:_,editlistid:0,EditProjectListConfigDialog:!1,NewProjectListDialog:!1,lists:[]}},setup(){E({title:"列表"})},async created(){this.localuser.islogin==!1&&this.$router.push("/account/login")},methods:{async getProjectList(){this.lists=(await p({url:"/projectlist/user/"+this.localuser.user.userid,method:"get"})).data}},mounted(){this.getProjectList()}};function A(n,t,u,v,l,d){const o=I,y=b;return m(),g(j,null,[e(B,null,{default:i(()=>[t[7]||(t[7]=f("h1",null,"列表",-1)),e(r,{onClick:t[0]||(t[0]=s=>l.NewProjectListDialog=!0)},{default:i(()=>t[3]||(t[3]=[a("创建")])),_:1}),t[8]||(t[8]=f("br",null,null,-1)),t[9]||(t[9]=f("br",null,null,-1)),(m(!0),g(j,null,S(l.lists,s=>(m(),g("div",{key:s.id},[e(k,{border:""},{default:i(()=>[e(O,null,{default:i(()=>[e(T,null,{default:i(()=>[a(c(s.title),1),e(U,{color:s.state=="private"?"primary":"green"},{default:i(()=>[a(c(s.state=="private"?"私密":"公开"),1)]),_:2},1032,["color"])]),_:2},1024),e(q,null,{default:i(()=>[a(c(s.createTime+"创建，"+s.updateTime+"更新"),1)]),_:2},1024)]),_:2},1024),e(P,null,{default:i(()=>[a(c(s.description),1)]),_:2},1024),e(C,null,{default:i(()=>[e(r,{onClick:G=>{l.editlistid=s.id,l.EditProjectListConfigDialog=!0}},{default:i(()=>t[4]||(t[4]=[a("编辑")])),_:2},1032,["onClick"]),e(r,{to:`/projectlist/${s.id}`},{default:i(()=>t[5]||(t[5]=[a("打开")])),_:2},1032,["to"])]),_:2},1024)]),_:2},1024),t[6]||(t[6]=f("br",null,null,-1))]))),128))]),_:1}),e(V,{modelValue:l.EditProjectListConfigDialog,"onUpdate:modelValue":t[1]||(t[1]=s=>l.EditProjectListConfigDialog=s)},{default:i(()=>[e(o,{listid:l.editlistid,close:()=>l.EditProjectListConfigDialog=!1,callback:d.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"]),e(V,{modelValue:l.NewProjectListDialog,"onUpdate:modelValue":t[2]||(t[2]=s=>l.NewProjectListDialog=s)},{default:i(()=>[e(y,{listid:l.editlistid,close:()=>l.NewProjectListDialog=!1,callback:d.getProjectList},null,8,["listid","close","callback"])]),_:1},8,["modelValue"])],64)}const Z=w(h,[["render",A]]);export{Z as default};
