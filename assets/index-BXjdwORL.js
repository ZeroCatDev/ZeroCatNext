import{J as k,a5 as L,ac as O,M as C,S as V,a,_ as v,h as o,r as y,o as T,c as m,w as s,s as f,m as c,p as i,Z as w,e as g,y as h,F as x,q as I,x as B,ax as A,z as p,ay as $,W as u}from"./index-7Xd7uHpL.js";import{V as F}from"./VContainer-DYOs9gfY.js";const N=k({start:Boolean,end:Boolean,...L(),...O()},"VListItemAction"),S=C()({name:"VListItemAction",props:N(),setup(t,e){let{slots:d}=e;return V(()=>a(t.tag,{class:["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end},t.class],style:t.style},d)),{}}}),M={data(){return{totpList:[]}},methods:{async fetchTOTPList(){const t=await o.get("/totp/list");t.status==="success"&&(this.totpList=t.data.list)},async renameTOTP(t){const e=prompt("请输入新的名称");e&&(await o.post("/totp/rename",{totpId:t,name:e}),this.fetchTOTPList())},async deleteTOTP(t){await o.post("/totp/delete",{totpId:t}),this.fetchTOTPList()},async generateTOTP(){const t=await o.post("/totp/generate");t.status==="success"&&(alert(`新的TOTP验证器已生成: ${t.data.secret}`),this.fetchTOTPList())},async activateTOTP(t){const e=prompt("请输入TOTP令牌");e&&(await o.post("/totp/activate",{totpId:t,totpToken:e}),this.fetchTOTPList())}},mounted(){this.fetchTOTPList()}};function R(t,e,d,b,P,l){const _=y("v-list-item-content");return T(),m(F,null,{default:s(()=>[a(I,null,{default:s(()=>[a(f,{cols:"12"},{default:s(()=>[a(c,{onClick:l.generateTOTP},{default:s(()=>e[0]||(e[0]=[i("生成新的TOTP验证器")])),_:1},8,["onClick"])]),_:1}),a(f,{cols:"12"},{default:s(()=>[a(w,null,{default:s(()=>[(T(!0),g(x,null,h(P.totpList,n=>(T(),m(B,{key:n.id,onClick:r=>t.selectTOTP(n)},{default:s(()=>[a(_,null,{default:s(()=>[a(A,null,{default:s(()=>[i(p(n.name),1)]),_:2},1024),a($,null,{default:s(()=>[i(p(n.status),1)]),_:2},1024)]),_:2},1024),a(S,null,{default:s(()=>[a(c,{onClick:u(r=>l.renameTOTP(n.id),["stop"])},{default:s(()=>e[1]||(e[1]=[i("重命名")])),_:2},1032,["onClick"]),a(c,{onClick:u(r=>l.deleteTOTP(n.id),["stop"])},{default:s(()=>e[2]||(e[2]=[i("删除")])),_:2},1032,["onClick"]),a(c,{onClick:u(r=>l.activateTOTP(n.id),["stop"])},{default:s(()=>e[3]||(e[3]=[i("激活")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}const D=v(M,[["render",R]]);export{D as default};
