import{_ as m}from"./ProjectsCards-CpL0l4Vy.js";import{_ as y,i as _,o as r,e as c,a as e,B as f,w as l,C as u,p,z as h,n as d,H as P,F as j}from"./index-d1myrqeE.js";import{V as w}from"./VPagination-DSFiQlWc.js";const C={components:{ProjectsCards:m},props:{authorid:{type:String,default:""},title:{type:String,default:""},type:{type:String,default:""},description:{type:String,default:""},order:{type:String,default:"view_down"},source:{type:String,default:""},state:{type:String,default:""},tag:{type:String,default:""},showinfo:{type:String,default:!1},actions:{type:Array,required:!1}},data(){return{ProjectsLoading:!1,projects:[],curPage:1,totalPage:1,limit:20,typeitems:{all:"",scratch:"scratch",python:"python"},usetime:0,projectscount:0,search:{title:"",type:"",description:"",source:"",order:{name:"观看量升序",type:"view_up"},authorid:"",type:{name:"所有",type:""},typeitems:[{name:"所有",type:""},{name:"Scratch",type:"scratch"},{name:"Python",type:"python"}],orderitems:[{name:"观看量升序",type:"view_up"},{name:"观看量降序",type:"view_down"},{name:"时间升序",type:"time_up"},{name:"时间降序",type:"time_down"},{name:"序号升序",type:"id_up"},{name:"序号降序",type:"id_down"}],state:""}}},async created(){await this.getprojects()},methods:{async getprojects(){this.onPageChange(1)},async onPageChange(o){this.usetime=Date.now(),this.ProjectsLoading=!0,this.projects=await _({url:`/searchapi?search_userid=${this.authorid}&search_type=${this.type=="all"?"":this.type}&search_title=${this.title}&search_source=${this.source}&search_description=${this.description}&search_orderby=${this.order}&search_state=${this.state}&search_tag=${this.tag}&curr=${o}&limit=${this.limit}`,method:"get"}),this.totalPage=Math.ceil(this.projects.totalCount[0].totalCount/this.limit),this.projectscount=this.projects.totalCount[0].totalCount,this.curPage=o,console.log(this.projects),console.log(this.totalPage),this.ProjectsLoading=!1,this.usetime=Date.now()-this.usetime}}},v={key:0,class:"mb-2"};function S(o,s,a,V,t,n){const g=m;return r(),c(j,null,[e(f,{active:t.ProjectsLoading,height:"4",indeterminate:""},null,8,["active"]),a.showinfo==!0||a.showinfo=="true"?(r(),c("div",v,[e(d,null,{default:l(()=>[e(u,{icon:"mdi-counter",start:""}),p("共"+h(this.projectscount)+"个作品 ",1)]),_:1}),e(d,null,{default:l(()=>[e(u,{icon:"mdi-clock",start:""}),p("本页加载用时"+h(Math.abs(t.usetime/1e3))+"秒 ",1)]),_:1})])):P("",!0),e(g,{projects:t.projects,actions:a.actions},null,8,["projects","actions"]),e(w,{modelValue:t.curPage,"onUpdate:modelValue":[s[0]||(s[0]=i=>t.curPage=i),s[1]||(s[1]=i=>n.onPageChange(t.curPage))],length:t.totalPage,rounded:"circle","v-model":t.curPage,onInput:s[2]||(s[2]=i=>n.onPageChange(t.curPage))},null,8,["modelValue","length","v-model"])],64)}const b=y(C,[["render",S]]);export{b as _};
